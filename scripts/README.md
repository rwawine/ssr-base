# Pre-Build Refactoring Script

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ –∫–æ–¥–µ –ø–µ—Ä–µ–¥ —Å–±–æ—Ä–∫–æ–π –ø—Ä–æ–µ–∫—Ç–∞.

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –ø–µ—Ä–µ–¥ build
```bash
npm run build
```
–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –ø–µ—Ä–µ–¥ —Å–±–æ—Ä–∫–æ–π –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç –≤—Å–µ —Ñ–∞–π–ª—ã.

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫
```bash
# –ü–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏
npm run refactor

# –¢–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
npm run refactor:check

# Build –±–µ–∑ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
npm run build:no-refactor
```

## üîß –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

### 1. –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π (`src/app`, `src/components`, `src/hooks`, `src/types`, `src/lib`, `src/utils`)
- –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ñ–∞–π–ª–æ–≤

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ `package.json`
- –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –≤–µ—Ä—Å–∏–∏ React, Next.js, TypeScript

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤ ProductCard
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã `ProductCard`
- –ú–µ–Ω—è–µ—Ç `import ProductCard from '@/components/productCard/ProductCard'` –Ω–∞ `import { ProductCard } from '@/components/productCard/ProductCard'`

### 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—â–∏—Ö –ø—Ä–æ–±–ª–µ–º
- –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∏–º–ø–æ—Ä—Ç—ã React
- –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ `undefined` —Å–≤–æ–π—Å—Ç–≤–∞–º
- –î–æ–±–∞–≤–ª—è–µ—Ç fallback –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è `cart.totalPrice`

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–±–ª–µ–º –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏
- –ò—â–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫ `isHydrated` –¥–ª—è cart/favorites —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –æ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è—Ö SSR/CSR

### 6. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- –ó–∞–ø—É—Å–∫–∞–µ—Ç Prettier –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π —Å—Ç–∏–ª—å –∫–æ–¥–∞

### 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ TypeScript
- –ó–∞–ø—É—Å–∫–∞–µ—Ç `tsc --noEmit` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –æ—à–∏–±–∫–∏ TypeScript

### 8. –ü—Ä–æ–≤–µ—Ä–∫–∞ ESLint
- –ó–∞–ø—É—Å–∫–∞–µ—Ç ESLint –¥–ª—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∞–≤–∏–ª–∞–º –ª–∏–Ω—Ç–µ—Ä–∞

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

–°–∫—Ä–∏–ø—Ç –≤—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á–µ—Ç –æ:
- ‚úÖ –£—Å–ø–µ—à–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö
- ‚ö†Ô∏è –ù–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è—Ö
- ‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö
- üìä –û–±—â–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ø—Ä–æ–±–ª–µ–º

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### –ò–º–ø–æ—Ä—Ç—ã ProductCard
```typescript
// ‚ùå –î–æ
import ProductCard from '@/components/productCard/ProductCard';

// ‚úÖ –ü–æ—Å–ª–µ
import { ProductCard } from '@/components/productCard/ProductCard';
```

### –ü—Ä–æ–≤–µ—Ä–∫–∏ –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏
```typescript
// ‚ùå –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞
const cartQuantity = getItemQuantity(product.id);

// ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
const cartQuantity = isHydrated ? getItemQuantity(product.id) : 0;
```

### Fallback –∑–Ω–∞—á–µ–Ω–∏—è
```typescript
// ‚ùå –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞
const total = cart.totalPrice * discount;

// ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø
const total = (cart.totalPrice || 0) * discount;
```

## üîç –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–°–∫—Ä–∏–ø—Ç –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å, –∏–∑–º–µ–Ω–∏–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞:

```javascript
const config = {
  srcDir: 'src',
  componentsDir: 'src/components',
  pagesDir: 'src/app',
  extensions: ['.tsx', '.ts', '.jsx', '.js'],
  excludeDirs: ['node_modules', '.next', 'dist', 'build', '.git'],
  // ...
};
```

## üö® –ö–æ–¥—ã –≤—ã—Ö–æ–¥–∞

- `0` - –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ
- `1` - –ù–∞–π–¥–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã, —Ç—Ä–µ–±—É—é—â–∏–µ –≤–Ω–∏–º–∞–Ω–∏—è

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ó–∞–ø—É—Å–∫–∞–π—Ç–µ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º build** - —ç—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç –ø—Ä–æ–±–ª–µ–º—ã –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ CI/CD** - –¥–æ–±–∞–≤—å—Ç–µ –≤ pipeline –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
3. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ** - –¥–æ–±–∞–≤–ª—è–π—Ç–µ –Ω–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ –º–µ—Ä–µ —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–µ–∫—Ç–∞
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ IDE** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ESLint –∏ Prettier –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –¥–ª—è —Ä–∞–Ω–Ω–µ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º

## üõ†Ô∏è –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫:

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–æ–≤–µ—Ä–∫–∏
2. –î–æ–±–∞–≤—å—Ç–µ –µ—ë –≤—ã–∑–æ–≤ –≤ `runRefactoring()`
3. –û–±–Ω–æ–≤–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

–ü—Ä–∏–º–µ—Ä:
```javascript
function checkNewIssue() {
  // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
  return issuesFound;
}

// –í runRefactoring()
totalIssues += checkNewIssue();
``` 